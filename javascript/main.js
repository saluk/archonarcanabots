!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.r(t),a.d(t,"arcana_main",(function(){return M}));var i={Brobnar:"https://archonarcana.com/images/e/e0/Brobnar.png",Dis:"https://archonarcana.com/images/e/e8/Dis.png",Logos:"https://archonarcana.com/images/c/ce/Logos.png",Mars:"https://archonarcana.com/images/d/de/Mars.png",Sanctum:"https://archonarcana.com/images/c/c7/Sanctum.png",Saurian:"https://archonarcana.com/images/9/9e/Saurian_P.png",Star_Alliance:"https://archonarcana.com/images/7/7d/Star_Alliance.png",Shadows:"https://archonarcana.com/images/e/ee/Shadows.png",Untamed:"https://archonarcana.com/images/b/bd/Untamed.png",Anomaly:"https://archonarcana.com/images/thumb/a/a1/Anomaly_icon.png/40px-Anomaly_icon.png",Unfathomable:"https://archonarcana.com/images/1/10/Unfathomable.png"},r=function(){function e(t,a,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.field=a,this.label="",this.split_on="",this.values=[],this.checknumbers=!1,this.divclass="",this.attach="",this.combo=!1,this.basic=!1,this.triggerAdvanced=!1,this.hidden=!1,Object.assign(this,n),this}var t,a,r;return t=e,(a=[{key:"getElement",value:function(){return this.getElements()[0]}},{key:"getElements",value:function(){return"int"===this.type?[$("[name="+this.field+"_min")[0],$("[name="+this.field+"_max")[0]]:$("[name="+this.field+"]")}},{key:"addElement",value:function(){var e,t,a=this,n=a.attach,r=(e=this.field,(t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href))?decodeURIComponent(t[1]):"");if(r&&!this.basic&&(this.triggerAdvanced=!0),""!==n){if("br"===this.type&&$(n).append("<br>"),"text"===this.type){this.label&&!this.hidden&&$(n).append('<label for="'+this.field+'">'+this.label+"</label>");var s="";this.hidden&&(s=' type="hidden" '),$(n).append('<input name="'+this.field+'"'+s+' value="'+r+'" />'),console.log("add text field "+this.field)}if("select"===this.type){var o=[];if(this.label&&o.push('<label for="'+this.field+'">'+this.label+"</label>"),this.combo?o.push('<select class="js-multiple" name="'+this.field+'" multiple>'):o.push('<select name="'+this.field+'">'),this.combo||o.push('<option value=""></option>'),this.values.map((function(e){var t="";r.match(e)&&(t=' selected="true"'),o.push('<option value="'+e+'"'+t+">"+e+"</option>")})),o.push("</select>"),$(n).append(o.join("")),this.combo){var c=$('select[name="'+this.field+'"]');console.log("Make combo field for "+this.field),console.log(c),c.select2(),c.on("select2:select",(function(e){var t=e.params.data.element,a=$(t);a.detach(),$(this).append(a),$(this).trigger("change")})),r.split("+").map((function(e){var t=$(c).find('[value="Name"]');t.detach(),$(c).append(t)})),$(c).trigger("change")}}"checkbox"===this.type&&this.values.map((function(e){var t=i[e],s="";s+='<div class="'+a.divclass+'">',s+='<input type="checkbox" ',t&&(s+='class="checkbox-house"'),r.replace(/\+/g," ").match(e)&&(s+=' checked="true" '),s+='name="'+a.field+'" id="'+e+'" value="'+e+'">',s+='<label class="checkbox-label" for="'+e+'"><span class="checkbox-custom">',t?(s+='<span class="checkbox-checkbox"></span>',s+='<img src="'+t+'" class="houseIcon">'):s+=e.replace(/\_/g," "),s+="</span></label></div>",$(n).append(s)}))}}},{key:"getData",value:function(){if("text"===this.type){var e=this.getElement().value;return e=function(e){return e.replace('"',"%").replace("'","%")}(e),this.split_on.length>0?e.split(this.split_on):[e]}if("select"===this.type){var t=[];if(console.log(this.getElement()),!this.getElement().selectedOptions)return console.log("nothing selected for "+this.field),t;for(var a=this.getElement().selectedOptions,n=0;n<a.length;n++)t.push(a[n].value);return t}if("int"===this.type)return{min:this.getElements()[0].value,max:this.getElements()[1].value};if("checkbox"===this.type){var i=[],r=this.getElements(),s=this;return r.map((function(e){if(r[e].checked){var t=r[e].value;s.checknumbers?"0"===t&&(i.push(""),i.push(t)):i.push(t)}})),i}}},{key:"assignData",value:function(e){var t=this.getData();void 0!==t&&(e[this.field]=t)}},{key:"listener",value:function(e,t){var a=function(){e(t)};if("text"===this.type)this.getElement().addEventListener("input",a);else if("checkbox"===this.type){var n=this.getElements();n.map((function(e){n[e].addEventListener("change",a)}))}else if("int"===this.type)this.getElements()[0].addEventListener("input",a),this.getElements()[1].addEventListener("input",a);else if("select"===this.type){if(this.combo)return $('select[name="'+this.field+'"]').select2().on("change",a);this.getElement().addEventListener("change",a)}}}])&&n(t.prototype,a),r&&n(t,r),e}(),o=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Min ";e.push(new r("select",t+"_min",{label:s,attach:a,values:n})),i||e.push(new r("select",t+"_max",{label:"Max ",attach:a,values:n}))},c=["Alexandre Leoni","Art Tavern","Ângelo Bortolini","BalanceSheet","Bogdan Tauciuc","Brian Fajardo","Brolken","Caio Monteiro","Chris Bjors","David Tenorio","Dong Cheng","John Silva","Marc Escachx","Mariana Ennes","Michele Giorgi","Monztre","Radial Studio","Radial Studios","Roman Semenenko","Stanislav Dikolenko","Tomek Larek","Vladimir Kafanov","Vladimir Zyrianov"],l=["AI","Beast","Alien","Scientist","Angel","Aquan","Thief","Fisher","Witch","Dinosaur","Politician","Elf","Human","Knight","Mutant","Power","Robot","Ship","Spirit"];function h(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var d=["Logos","Sanctum","Saurian","Star_Alliance","Shadows","Unfathomable","Untamed"],m=["Call_of_the_Archons","Age_of_Ascension","Worlds_Collide","Mass_Mutation"],p=["Common","Uncommon","Rare","Fixed","Variant","Special","Evil Twin"],g={Name:"Name",House:"House",Number:"CardNumber",Rarity:"Rarity",Power:"Power"},v=["1","2","3","4","5+"],f=[new r("checkbox","houses",{label:"Houses",basic:!0,values:["Brobnar","Dis","Logos","Mars","Sanctum","Saurian","Star_Alliance","Shadows","Untamed","Anomaly"],divclass:"house",attach:"div.house-entries"}),new r("text","cardname",{attach:"div.card-name-entries",split_on:"|",basic:!0}),new r("checkbox","sets",{label:"Sets",basic:!0,values:m,divclass:"set",attach:"div.set-entries"}),new r("checkbox","types",{label:"Types",basic:!0,values:["Creature","Artifact","Upgrade","Action"],divclass:"type",attach:"div.type-entries"}),new r("text","cardtext",{attach:"div.card-text-entries",split_on:"|"}),new r("text","flavortext",{attach:"div.flavor-text-entries",split_on:"|"}),new r("text","cardnumber",{attach:"div.card-number-entries"}),new r("select","rarities",{values:["Common","Uncommon","Rare","Fixed","Variant","Special"],basic:!0,combo:!0,attach:"div.rarity-entries"}),new r("select","traits",{values:["Agent","Martian","AI","Beast","Scientist","Alien","Handuhan","Human","Robot","Krxix","Proximan","Thief","Ally","Angel","Spirit","Aquan","Cat","Cyborg","Insect","Leader","Witch","Mutant","Niffle","Rat","Wolf","Pirate","Demon","Knight","Sin","Dinosaur","Assassin","Egg","Philosopher","Politician","Priest","Soldier","Dragon","Psion","Elf"],combo:!0,attach:"div.trait-entries"}),new r("select","artists",{values:["Adam Schumpert","Adam Vehige","Agri Karuniawan","Albert Bruun","Alena Medovnikova","Alena Zhukova","Alexandre Leoni","Alexey Iavtuschenco","Allon Kremer","Alyn Spiller","Ameen Naksewee","Andreas Zafiratos","Andrew Bosley","Angelica Alieva","Angelina Chernyak","Anton Zemskov","Anzka Nguyen","Art tavern","Asep Ariyanto","Atha Kanaani","Ângelo Bortolini","BalanceSheet","Bogdan Tauciuc","Brandon Hunt","Brolken","Caio Monteiro","Caravan Studio","Chris Bjors","Cindy Avelino","Colin Searle","Dany Orizio","David Auden Nash","David Keen","David Kegg","David Pursley","David Tenorio","Diego Machuca","Djib","Dong Cheng","Eric Kenji Aoyagi","Etienne Hebinger","Fábio Perez","Felipe Martini","Forrest Imel","Francisco Badilla","Gabriel Rubio","Gabriel Scavariello","Gabriel Zanini","Gabriela Marchioro","Girma Moges"],combo:!0,attach:"div.artist-entries"}),new r("select","cardkeywords",{values:["Alpha","Assault","Deploy","Elusive","Hazardous","Invulnerable","Omega","Poison","Skirmish","Taunt"],combo:!0,attach:"div.keyword-entries"}),new r("select","order_by",{attach:"div.order-entries",combo:!0,values:Object.keys(g)}),new r("checkbox","reprints",{values:["New Cards","Reprints"],basic:!0,attach:"div.isnew-entries"})];o(f,"amber","div.aember-entries",["0","1","2","3","4+"]),o(f,"armor","div.armor-entries",["0","1","2","3","4","5+"]),o(f,"power","div.power-entries",["0","1","2","3","4","5","6","7","8","9","10+"]),o(f,"enhance_amber","div.enhance-entries",v,!0,'<img src="https://archonarcana.com/images/f/fb/Enhance_aember.png" width="20px" class="enhance-image">'),o(f,"enhance_capture","div.enhance-entries",v,!0,'<img src="https://archonarcana.com/images/f/fc/Enhance_capture.png" width="20px" class="enhance-image">'),o(f,"enhance_damage","div.enhance-entries",v,!0,'<p></p><img src="https://archonarcana.com/images/5/50/Enhance_damage.png" width="20px" class="enhance-image">'),o(f,"enhance_draw","div.enhance-entries",v,!0,'<img src="https://archonarcana.com/images/a/ac/Enhance_draw.png" width="20px" class="enhance-image">');var b=function(e){var t=null;return f.map((function(a){a.field!==e||(t=a)})),t};function y(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}var _=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};if(t.length>0){var r=t.filter((function(e){return e}));if((r=r.map((function(t){return e+i(t.replace(/\_/g,"%20"))+a}))).length>0)return"("+r.join("%20"+n+"%20")+")"}return""},A=function(e,t,a,n){if(a){if(console.log(a),void 0===a.min||void 0===a.max)return;if(a.min.length>0|a.max.length>0){var i=a.min;(i=i.replace("+",""))||(i=0);var r=a.max;(!r||r.search(/\+/)>=0)&&(r=5e3),t.push(_("",[e+"."+n+" >= "+i,e+"."+n+" <= "+r],"%20","AND"))}}},w=function(e){var t=md5(e);return"/images/"+t.substring(0,1)+"/"+t.substring(0,2)+"/"+e},x=function(e){return"https://archonarcana.com/thumb.php?f="+e+"&width=200"},E=function(e){if(e.length>=3)return e;var t="000"+e;return t.substring(t.length-3,t.length)},S={element:void 0,offset:0,offsetActual:0,names_used:new Set,pageSize:20,totalCount:0,houses:[],types:[],sets:[],cardname:[],cardtext:[],flavortext:[],power_min:[""],power_max:[""],amber_min:[""],amber_max:[""],armor_min:[""],armor_max:[""],enhance_amber_min:[""],enhance_amber_max:[""],enhance_damage_min:[""],enhance_damage_max:[""],enhance_capture_min:[""],enhance_capture_max:[""],enhance_draw_min:[""],enhance_draw_max:[""],rarities:[],traits:[],artists:[],cardkeywords:[],cardnumber:[],order_by:[],errata:[!1],gigantic:[!1],exclusiveSet:[!1],reprints:["New Cards","Reprints"],spoilers:!1,loadingCards:!1,loadingCount:!1,requestcount:0,output_settings:{img_width:200,img_height:280},init:function(e,t){var a=this;this.offset=0,this.offsetActual=0,this.pageSize=Number.parseInt(t),this.element=e,this.spoilers=null!=this.element.attr("data-spoilers"),this.spoilers?(b("houses").values=d,b("rarities").values=p,b("traits").values=l,b("artists").values=c,f=f.filter((function(e){return"sets"!==e.field}))):f=f.filter((function(e){return"reprints"!==e.field})),window.addEventListener("scroll",(function(){a.listenScroll()}))},toUrl:function(){var e=[],t=this;f.forEach((function(a){var n=t[a.field];(n=n.join("+"))&&e.push(a.field+"="+n)})),(e=e.join("&"))&&(e="?"+e);var a="/Card_Gallery";this.spoilers&&(a="/Spoilers"),history.replaceState({},document.title,a+e)},initForm:function(e){f.map((function(t){t.assignData(e)})),0==e.order_by.length&&(e.spoilers?e.order_by=["Number"]:e.order_by=["House","Name"]),e.offset=0,e.offsetActual=0,e.toUrl(),e.newSearch()},initElement:function(e){var t=this;s=this.element.attr("data-search"),s.split(";").forEach((function(e){var a=e.split(":");t[a[0]]=a[1].split(" or ")})),s=this.element.attr("data-output"),s.split(";").forEach((function(e){var a=e.split(":");t.output_settings[a[0]]=a[1]})),e.newSearch()},newSearch:function(){this.names_used=new Set,this.offset=0,this.offsetActual=0,this.loadingCount&&this.loadingCount.abort(),this.loadingCards&&this.loadingCards.abort(),this.requestcount++,this.element.empty(),this.loadCount(),this.load()},searchString:function(e){var t=[];this.traits.forEach((function(e){t.push("=%22"+e+"%22"),t.push("%20LIKE%20%22%25+•+"+e+"%22"),t.push("%20LIKE%20%22"+e+"+•+%25%22"),t.push("%20LIKE%20%22%25+•+"+e+"+•+%25%22")}));var a=[];console.log(this.cardkeywords),this.cardkeywords.forEach((function(e){a.push("=%22"+e+"%22"),a.push("%20LIKE%20%22%25+•+"+e+"%22"),a.push("%20LIKE%20%22"+e+"+•+%25%22"),a.push("%20LIKE%20%22%25+•+"+e+"+•+%25%22")})),console.log(this.cardkeywords);var n=[];this.houses.forEach((function(e){n.push("=%22"+e+"%22"),n.push("%20LIKE%20%22%25+•+"+e+"%22"),n.push("%20LIKE%20%22"+e+"+•+%25%22"),n.push("%20LIKE%20%22%25+•+"+e+"+•+%25%22")})),this.gigantic[0]&&(this.cardtext=["other half"]);var i="CardData",r=!0;this.spoilers&&(i="SpoilerData",r=!1);var s=[_(i+".House",n,"","OR"),_("Type=%22",this.types,"%22","OR"),_("Rarity=%22",this.rarities,"%22","OR"),_(i+".Name%20LIKE%20%22%25",this.cardname[0].split("+"),"%25%22","OR"),_(i+".Artist=%22",this.artists,"%22","OR"),_(i+".Traits",t,"","OR"),_(i+".Keywords",a,"","OR"),_(i+".SearchFlavorText%20LIKE%20%22%25",this.flavortext[0].split("+"),"%25%22","OR"),_(i+".SearchText%20LIKE%20%22%25",this.cardtext[0].split("+"),"%25%22","OR"),_("CardNumber=%22",this.cardnumber,"%22","OR",E)];this.exclusiveSet[0]||s.push(_("SetName=%22",this.sets,"%22","OR")),A(i,s,{min:this.power_min[0],max:this.power_max[0]},"Power"),A(i,s,{min:this.amber_min[0],max:this.amber_max[0]},"Amber"),A(i,s,{min:this.armor_min[0],max:this.armor_max[0]},"Armor"),A(i,s,{min:this.enhance_amber_min[0],max:this.enhance_amber_min[0]},"EnhanceAmber"),A(i,s,{min:this.enhance_draw_min[0],max:this.enhance_draw_min[0]},"EnhanceDraw"),A(i,s,{min:this.enhance_capture_min[0],max:this.enhance_capture_min[0]},"EnhanceCapture"),A(i,s,{min:this.enhance_damage_min[0],max:this.enhance_damage_min[0]},"EnhanceDamage"),this.errata[0]&&s.push("ErrataData.Version IS NOT NULL"),this.spoilers&&(this.reprints.includes("New Cards")&&s.push("IsNew=%22yes%22"),this.reprints.includes("Reprints")&&s.push("IsNew IS NULL"));var o=_("",s,"","AND");o="&where="+o;var c=[i+".Power",i+".Rarity",i+".Name",i+".House",i+".Type",i+".Image"];r&&c.push("SetData.CardNumber"),this.spoilers||c.push(i+".Text"),this.spoilers&&(c.push(i+".CardNumber"),c.push(i+".SearchText"),c.push(i+".SearchFlavorText"),c.push(i+".Traits"),c.push(i+".Armor"),c.push(i+".IsNew"),c.push(i+".Source"),c.push(i+".Amber"));var l=c.join("%2C"),u="&fields="+l,d="/api.php?action=cargoquery&format=json",p="&tables="+i;r&&(p+="%2C%20SetData");var v="&fields=COUNT(DISTINCT%20"+i+".Name)",f="&group_by="+l,b="";if(r)b="&join_on="+i+"._pageName=SetData._pageName";var y="&limit="+this.pageSize*m.length,w="&offset="+this.offset,x="&order_by="+this.order_by.map((function(e){return g[e]})).join("%2C"),S="";if(this.errata[0]&&(p+="%2C%20ErrataData",b+=","+i+"._pageName=ErrataData._pageName"),this.exclusiveSet[0]){console.log("is exclusive");var C=[];this.sets.map((function(e){console.log("check search set"+e);var t,a=[],n=h(m);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(console.log("prevset:"+i),i===e)break;a.push('sum(SetData.SetName="'+i.replace(/\_/g," ")+'")=0')}}catch(e){n.e(e)}finally{n.f()}console.log(a),C.push(_("",a,"","AND"))})),console.log(C),S="&having="+_("",C,"","OR")}console.log("having="+S);var R="";return"data"===e?R=d+p+u+o+b+f+y+w+S+x:"count"===e&&(R=d+p+v+o+b+"&limit=1"+S),console.log(R),R},outputImageResult:function(e,t){var a="";a+='<div class="gallery-image" style="position:relative;text-align:center">',a+=' <a href="/'+t.Name+'">';t.Image;return a+='<img id="img_'+t.Name.replace(/\(|\)/g,"br")+'" width='+e.output_settings.img_width+" height="+e.output_settings.img_height+' src="'+x(t.Image)+'" data-src="'+w(t.Image)+'">',a+='<div style="position:absolute;bottom:8px;left:16px;">'+t.Name+"</div>",a+="</a>",a+="</div>"},outputSpoilerResult:function(e,t){var a=x(t.Image),n=w(t.Image),i='<div class="spoilerEntry spoilerReprint">';"yes"===t.IsNew&&(i='<div class="spoilerEntry">',i+='<div class="newCard">new</div>'),i+='<div class="image"><div class="header">',i+='<div class="number">NUMBER</div>',i+='<div class="name">',i+="NAME",i+="</div></div>",i+='<div class="picture"><center><div class="center"><div class="floatnone"><a href="/File:IMAGE" class="image"><img alt="IMAGEALT" src="IMAGESRC" decoding="async" style="vertical-align: middle" width="225" height="320" data-src="IMAGEFULL"></a></div></div></center></div></div>',i+='<div class="text"><div class="header"><div class="number">NUMBER</div><div class="name">',i+="NAME",i+="</div></div>",i+='<div class="cardInfo">',""==t.Power&&""==t.Armor||(i+=" POWER power - ARMOR armor "),""!=t.Amber&&(i+=' AMBER <img src="https://archonarcana.com/images/f/fb/Enhance_aember.png" width="18px"> '),(""!=t.Power||""!=t.Armor||t.Amber)&&(i+="<br>"),i+="<i>TRAITS</i><p>",i+="TEXT<p><small><b>Source: </b><i>SOURCE</i></small></div>",i+='<div class="bottomRow"><div class="type">TYPE</div><div class="rarity">RARITY</div>',i+="</div></div></div>",i+='<div class="mobileEntry">',"yes"===t.IsNew&&(i+='<div class="newCard">new</div>'),i+='<div class="header">      <div class="number">NUMBER</div><div class="name">NAME</div>      </div><div class="picture"><div class="floatnone">      <a href="/File:IMAGE" class="image">      <img alt="IMAGEALT" src="IMAGESRC" decoding="async" style="vertical-align: middle" width="225" height="320" data-src="IMAGEFULL"></img></a></div></div>      <div class="mobileText">',""==t.Power&&""==t.Armor||(i+=" POWER power - ARMOR armor "),""!=t.Amber&&(i+=' AMBER <img src="https://archonarcana.com/images/f/fb/Enhance_aember.png" width="18px"> '),(""!=t.Power||""!=t.Armor||t.Amber)&&(i+="<br>"),i+='<i>TRAITS</i><p>TEXT<p><small><b>Source: </b><i>SOURCE</i></small></div>      <div class="mobileBottomRow">        <div class="type"><b>Type</b>: TYPE</div>        <div class="rarity"><b>Rarity</b>: RARITY</div>      </div></div>';var r="";"Evil Twin"===t.Rarity&&(r='<img src="https://archonarcana.com/images/4/42/Evil-twin.png" width="20px">');var s=y(t.Name).replace("(Evil Twin)","");return s="yes"===t.IsNew?'<a href="/File:IMAGE">'+s+"</a>"+r:'<a href="/'+s+'">'+s+"</a>"+r,i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/NAME/g,s)).replace(/RARITY/g,y(t.Rarity))).replace(/IMAGESRC/g,a)).replace(/IMAGEFULL/g,n)).replace(/IMAGE/g,y(t.Image))).replace(/NUMBER/g,y(t.CardNumber))).replace(/TEXT/g,y(t.SearchText))).replace(/TYPE/g,y(t.Type))).replace(/TRAITS/g,y(t.Traits))).replace(/POWER/g,y(t.Power))).replace(/ARMOR/g,y(t.Armor))).replace(/SOURCE/g,y(t.Source))).replace(/AMBER/g,y(t.Amber)),console.log(i),i},updateResults:function(e){var t=this.element;$(".loader").remove(),$(".load_more").remove();var a=this.pageSize;for(var n in e){this.offset=this.offset+1;var i=e[n];if(!this.names_used.has(i.title.Name)&&(this.offsetActual+=1,this.spoilers?t.append(this.outputSpoilerResult(this,i.title)):t.append(this.outputImageResult(this,i.title)),this.names_used.add(i.title.Name),(a-=1)<=0))break}t.append('<div class="load_more"></div>');var r=$("img[data-src]");r.map((function(e){var t=r[e];t.onload=function(){var e;$(t).next().remove(),(e=t).setAttribute("src",e.getAttribute("data-src")),e.onload=function(){e.removeAttribute("data-src")}}}))},wikitext:function(e){self.loadingWiki=$.ajax("/api.php?action=parse&format=json&text={{Spoiler Query}}&title="+e+"&contentmodel=wikitext",{success:function(e,t,a){$("#popup").empty(),$("#popup").append(e.parse.text["*"]),self.loadingWiki=!1}})},load:function(){this.element.append('<div class="loader">Loading...</div>');var e=this;e.loadingCards=$.ajax(this.searchString("data"),{success:function(t,a,n){n.requestcount<e.requestcount||(e.updateResults(t.cargoquery),e.loadingCards=!1)}}),e.loadingCards.requestcount=e.requestcount},loadCount:function(){var e=this;e.loadingCount=$.ajax(e.searchString("count"),{success:function(t,a,n){n.requestcount<e.requestcount||(e.totalCount=Number.parseInt(t.cargoquery[0].title["Name)"]),e.loadingCount=!1,$(".cg-results").empty().append(e.totalCount+" results"))}}),e.loadingCount.requestcount=e.requestcount},nextPage:function(){if(this.offsetActual>=this.totalCount)return!1;this.load()},listenScroll:function(){if(this.loadingCards||this.loadingCount)return!1;if(function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}($(".load_more")))return this.nextPage(),!0;var e=document.documentElement.scrollHeight;document.documentElement.scrollTop+window.innerHeight>=e&&this.nextPage()}},C=function(e){var t=!1;f.map((function(e){e.addElement(),e.triggerAdvanced&&(t=!0)})),$(".advanced-search")[0].addEventListener("click",(function(e){"none"!==$(".cg-advanced-menu")[0].style.display?($(".cg-advanced-menu")[0].style="display:none;",$(".advanced-search-icon")[0].style=""):($(".cg-advanced-menu")[0].style="",$(".advanced-search-icon")[0].style="transform:rotate(180deg)")})),t&&$(".advanced-search")[0].click(),f.map((function(t){t.listener(e.initForm,e)})),console.log("form built")};var R=function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};if(t.length>0){var r=t.filter((function(e){return e}));if((r=r.map((function(t){return e+i(t.replace(/\_/g,"%20"))+a}))).length>0)return"("+r.join("%20"+n+"%20")+")"}return""},I=function(e){var t=md5(e);return"/images/"+t.substring(0,1)+"/"+t.substring(0,2)+"/"+e},N=function(e){if(e.length>=3)return e;var t="000"+e;return t.substring(t.length-3,t.length)},T={element:void 0,offset:0,pageSize:20,totalCount:0,houses:[],types:[],sets:[],cardname:[],cardtext:[],flavortext:[],power_min:[""],power_max:[""],amber_min:[""],amber_max:[""],armor_min:[""],armor_max:[""],rarities:[],traits:[],cardnumber:[],loadingCards:!1,loadingCount:!1,requestcount:0,numCards:2,init:function(e,t){this.element=e,this.numCards=t,this.newSearch()},newSearch:function(){this.loadingCards&&this.loadingCards.abort(),this.requestcount++,$(this.element).empty(),this.load()},searchString:function(){console.log(this.numCards),this.cardnumber=[];for(var e=0;e<this.numCards;e++)this.cardnumber.push(""+(t=404,Math.floor(Math.random()*Math.floor(t))+1));var t;this.sets=["Worlds Collide"],this.pageSize=this.numCards;var a=[R("House=%22",this.houses,"%22","OR"),R("Type=%22",this.types,"%22","OR"),R("SetName=%22",this.sets,"%22","OR"),R("Rarity=%22",this.rarities,"%22","OR"),R("CardData.Name%20LIKE%20%22%25",this.cardname,"%25%22","OR"),R("CardData.Traits%20LIKE%20%22%25",this.traits,"%25%22","OR"),R("CardData.FlavorText%20LIKE%20%22%25",this.flavortext,"%25%22","OR"),R("CardData.Text%20LIKE%20%22%25",this.cardtext,"%25%22","OR"),R("CardNumber=%22",this.cardnumber,"%22","OR",N)],n=R("",a,"","AND");n="&where="+n;var i=["Name","House","Type","Image","Text"].join("%2C");return"/api.php?action=cargoquery&format=json&tables=CardData%2C%20SetData"+("&fields="+i)+n+"&join_on=SetData._pageName%3DCardData._pageName"+("&group_by="+i)+("&limit="+this.pageSize)+("&offset="+this.offset)},updateResults:function(e){var t,a,n=$(this.element);for(var i in e){var r=e[i],s="";s+='<div class="header-image">',s+=' <a href="/'+r.title.Name+'"title="'+r.title.Name+'">',s+='<img class="card-'+(Number.parseInt(i)+1)+'" src="'+(t=r.title.Image,a=void 0,"/images/thumb/"+(a=md5(t)).substring(0,1)+"/"+a.substring(0,2)+"/"+t+"/200px-"+t+'" data-src="')+I(r.title.Image)+'">',s+="</a></div>",n.append(s)}},load:function(){var e=this;console.log(e.searchString()),e.loadingCards=$.ajax(e.searchString(),{success:function(t,a,n){n.requestcount<e.requestcount||(e.updateResults(t.cargoquery),e.loadingCards=!1)}}),e.loadingCards.requestcount=e.requestcount}};var M=function(){var e;console.log("hello"),console.log("initing cargo search"),$(".card-gallery-images").length>0?(S.init($(".card-gallery-images"),50),C(S),S.initForm(S)):$(".spoilerOuter").length>0&&(S.init($(".spoilerOuter"),50),C(S),S.initForm(S)),$("#cargo_results").length>0&&(S.init($("#cargo_results"),20),S.initElement(S)),(e=$(".genchart")).map((function(t){var a=e[t];console.log(a);var n=JSON.parse($(a).text());$(a).empty(),$(a).append('<canvas id="myChart"></canvas>');var i=$(a).children()[0].getContext("2d");new Chart(i,n),$(a)[0].style.display=""})),function(){if(console.log("initing random search"),$(".random_images").length>0){var e=$(".random_images")[0];T.init(e,e.getAttribute("data-number"))}}(),console.log(S)};M()}]);